@*
 * This template takes a single argument, a String containing a
 * message to display.
 *@
@(userId: String)(implicit request: RequestHeader, flash: Flash)

@main("main") {
    <script src="@routes.Assets.versioned("javascripts/user.js")" type="text/javascript"></script>
    <script >
        window.onload = () => {
            fetch("/category")
                    .then(response => response.json())
                    .then(json => {
                        const catBox = document.querySelector('div.category')
                        json.forEach((cat, index) => {
                            let option = document.createElement('option');
                            option.setAttribute('value', cat[0])
                            option.label = cat[1]
                            catBox.querySelector('select.category').append(option)
                        })
                    })
        }
    </script>

    <h2>Main Page</h2>

    <div class="category">
        <select class="category">
            <option selected value="0">전체</option>
        </select>
    </div>

    <input type="text" name="keyword">
    <input type="button" onclick="search()" value="검색">

    <br>
    <br>

    @if(userId != null){
        <p>user: @request.session.get("userId")</p>
        <button onclick="location.href='/user/logout'">Logout</button>
        <button onclick="cartList()">장바구니</button>
    } else {
        <input type="button" onclick="location.href='@routes.UserController.loginPage'" value="Login">
        <input type="button" onclick="location.href='@routes.UserController.registerPage'" value="Register">
    }
}